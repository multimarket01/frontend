import{a as g,g as N,j as B,k as T,l as $,m as W,n as D,o as H,p as K,q as V,r as G}from"./chunk-2ITIRS7A.js";import{A as _,B as E,k as U,y as C,z as P}from"./chunk-EQPXCRO3.js";import{$ as Q,na as b}from"./chunk-UFFZRDXC.js";import{Dc as v,M as h,Qc as w,R as c,Sc as a,Tc as p,U as s,Uc as l,V as L,a as q,ad as y,b as F,i as o,pc as S}from"./chunk-TA5YWXMT.js";var n=class x{constructor(e,t,r){this.store=e,this.router=t,this.authService=r}static accessToken(e){return e.access_token}static isAuthenticated(e){return!!e.access_token}static email(e){return e.email}static number(e){return e.number}static token(e){return e.token}register(e,t){}login(e,t){e.patchState({email:"john.customer@example.com",token:"",access_token:"115|laravel_sanctum_mp1jyyMyKeE4qVsD1bKrnSycnmInkFXXIrxKv49w49d2a2c5"}),this.store.dispatch(new g)}loginWithNumber(e,t){this.store.dispatch(new g)}forgotPassword(e,t){}verifyEmail(e,t){}verifyNumber(e,t){this.store.dispatch(new g)}updatePassword(e,t){}logout(e){this.store.dispatch(new G),this.router.navigate(["/"])}authClear(e){e.patchState({email:"",token:"",access_token:null,permissions:[]}),this.authService.redirectUrl=void 0,this.store.dispatch(new N),this.store.dispatch(new U)}static{this.\u0275fac=function(t){return new(t||x)(s(w),s(v),s(b))}}static{this.\u0275prov=c({token:x,factory:x.\u0275fac})}};o([a(B)],n.prototype,"register",null);o([a(T)],n.prototype,"login",null);o([a($)],n.prototype,"loginWithNumber",null);o([a(W)],n.prototype,"forgotPassword",null);o([a(D)],n.prototype,"verifyEmail",null);o([a(H)],n.prototype,"verifyNumber",null);o([a(K)],n.prototype,"updatePassword",null);o([a(V)],n.prototype,"logout",null);o([a(G)],n.prototype,"authClear",null);o([l()],n,"accessToken",null);o([l()],n,"isAuthenticated",null);o([l()],n,"email",null);o([l()],n,"number",null);o([l()],n,"token",null);n=o([p({name:"auth",defaults:{email:"",token:"",number:null,access_token:"",permissions:[]}})],n);var jt=(()=>{class i{constructor(t,r,u,m){this.store=t,this.router=r,this.modal=u,this.authService=m,this.access_token$=L(w).select(n.accessToken)}canActivate(t,r){return this.authService.redirectUrl=r.url,this.access_token$.subscribe(u=>{u?this.is_redirect=!0:(this.authService.isLogin=!0,this.is_redirect=!1)}),this.store.dispatch(new g).subscribe({complete:()=>!0}),!0}canActivateChild(t,r){return this.store.selectSnapshot(u=>u.auth&&u.auth.access_token)?((this.router.url.startsWith("/account")||this.router.url=="/checkout"||this.router.url=="/compare")&&this.router.navigate(["/"]),!1):!0}static{this.\u0275fac=function(r){return new(r||i)(s(w),s(v),s(Q),s(b))}}static{this.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var X=(()=>{class i{static{this.type="[Store] Get"}constructor(t){this.payload=t}}return i})(),z=(()=>{class i{static{this.type="[Store] Get By Slug"}constructor(t){this.slug=t}}return i})();var J=(()=>{class i{static{this.type="[Review] Get"}constructor(t){this.payload=t}}return i})(),Y=(()=>{class i{static{this.type="[Review] Post"}constructor(t){this.payload=t}}return i})(),Z=(()=>{class i{static{this.type="[Review] Put"}constructor(t,r){this.id=t,this.payload=r}}return i})();var tt=(()=>{class i{constructor(t){this.http=t}getReview(t){return this.http.get(`${y.URL}/review.json`,{params:t})}static{this.\u0275fac=function(r){return new(r||i)(s(S))}}static{this.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var j=class A{constructor(e){this.reviewsService=e}static review(e){return e.review}getReview(e,t){return this.reviewsService.getReview(t.payload).pipe(h({next:r=>{let u=r.data.filter(m=>m.product_id==t.payload.product_id);e.patchState({review:{data:u,total:u?.length}})},error:r=>{throw new Error(r?.error?.message)}}))}sendReview(e,t){}update(e,{payload:t,id:r}){}static{this.\u0275fac=function(t){return new(t||A)(s(tt))}}static{this.\u0275prov=c({token:A,factory:A.\u0275fac})}};o([a(J)],j.prototype,"getReview",null);o([a(Y)],j.prototype,"sendReview",null);o([a(Z)],j.prototype,"update",null);o([l()],j,"review",null);j=o([p({name:"review",defaults:{review:{data:[],total:0}}})],j);var et=(()=>{class i{constructor(t){this.http=t,this.skeletonLoader=!1}getQuestionAnswers(t){return this.http.get(`${y.URL}/question-and-answer.json`,{params:t})}static{this.\u0275fac=function(r){return new(r||i)(s(S))}}static{this.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var d=class R{constructor(e){this.questionsAnswersService=e}static questionsAnswers(e){return e.question}getQuestionAnswers(e,t){return this.questionsAnswersService.skeletonLoader=!0,this.questionsAnswersService.getQuestionAnswers(t.slug).pipe(h({next:r=>{let u=r.data.filter(m=>m.product_id==t.slug.product_id);e.patchState({question:{data:u,total:u?.length}})},complete:()=>{this.questionsAnswersService.skeletonLoader=!1},error:r=>{throw new Error(r?.error?.message)}}))}sendQuestion(e,t){}update(e,{payload:t,id:r}){}Feedback(e,t){}static{this.\u0275fac=function(t){return new(t||R)(s(et))}}static{this.\u0275prov=c({token:R,factory:R.\u0275fac})}};o([a(C)],d.prototype,"getQuestionAnswers",null);o([a(P)],d.prototype,"sendQuestion",null);o([a(_)],d.prototype,"update",null);o([a(E)],d.prototype,"Feedback",null);o([l()],d,"questionsAnswers",null);d=o([p({name:"question",defaults:{question:{data:[],total:0}}})],d);var rt=(()=>{class i{constructor(t){this.http=t,this.skeletonLoader=!1}getStores(t){return this.http.get(`${y.URL}/store.json`,{params:t})}static{this.\u0275fac=function(r){return new(r||i)(s(S))}}static{this.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var k=class I{constructor(e,t){this.storeService=e,this.router=t}static store(e){return e.store}static selectedStore(e){return e.selectedStore}getStores(e,t){return this.storeService.skeletonLoader=!0,this.storeService.getStores(t.payload).pipe(h({next:r=>{e.patchState({store:{data:r.data,total:r?.total?r?.total:r.data?.length}})},complete:()=>{this.storeService.skeletonLoader=!1},error:r=>{throw new Error(r?.error?.message)}}))}getStoreBySlug(e,{slug:t}){return this.storeService.getStores().pipe(h({next:r=>{if(r&&r.data){let u=e.getState(),m=r.data.find(ot=>ot.slug==t);e.patchState(F(q({},u),{selectedStore:m}))}},error:r=>{throw this.router.navigate(["/404"]),new Error(r?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||I)(s(rt),s(v))}}static{this.\u0275prov=c({token:I,factory:I.\u0275fac})}};o([a(X)],k.prototype,"getStores",null);o([a(z)],k.prototype,"getStoreBySlug",null);o([l()],k,"store",null);o([l()],k,"selectedStore",null);k=o([p({name:"store",defaults:{store:{data:[],total:0},selectedStore:null}})],k);export{n as a,jt as b,X as c,z as d,J as e,Y as f,Z as g,j as h,et as i,d as j,rt as k,k as l};
